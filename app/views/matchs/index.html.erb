<%= render 'layouts/header' %>

<div class="container">
	<div class="row">

		<p class="title-text">
			<%= @festival.name %><br>
			登録スタッフ一覧
	    </p>


			<table class="table table-bordered sub-text">
				<thead>
					<tr>
						<th style="width: 15%;">名前</th>
						<th style="width: 15%;">電話番号</th>
						<th style="width: 30%;">住所</th>
						<th colspan="3" style="width: 40%; text-align: center;">ポイント</th>
					</tr>
				</thead>
					<% @matchs.each do |matching| %>
					<tbody>
					<tr>
						<td>
							<p class="link-none"><%= matching.staff.name %></p>
						</td>
						<td>
							<%= matching.staff.telephone %>
						</td>
		                <td>
		                	<%= matching.staff.address %>
		                </td>
		                <% if Point.find_by(staff_id: matching.staff.id) %>
		                <td>
		                	現在のポイント：<%= Point.find_by(staff_id: matching.staff.id).plus_point %>
		                </td>
		                <td>
		                	<%= form_for Point.find_by(staff_id: matching.staff.id) do |point| %>
		                	<%= point.number_field :plus_point, min: 1, max: 3, class: "form-control", style: "width: 50px;"  %>
		                </td>
		                <td>
		                	<%= point.submit "ポイントを変更する", class: "green-button" %>
		                </td>
		                	<% end %>
		                <% else %>
		                <td colspan="2">
			                	<%= form_for @newpoint do |newpoint| %>
			                	<%= newpoint.hidden_field :staff_id, :value => matching.staff_id %>
			                	<%= newpoint.hidden_field :festival_id, :value => matching.festival_id %>
			                	<%= newpoint.number_field :plus_point %>
		                </td>
		                <td>
		                	<%= newpoint.submit "ポイントを付与する" %>
		                </td>
							<% end %>
	                	<% end %>
				</tbody>
				<% end %>
			</table>
	</div>
</div>




<p class="pagetop"></p>